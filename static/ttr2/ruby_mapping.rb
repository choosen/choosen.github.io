a = [
{left:"174px", top:"101px", simul_id: "01", length: 6  },
{left:"137px", top:"161px", simul_id: "02", length: 3  },
{left:"40px", top:"163px", simul_id: "03", length: 5  },
{left:"71px", top:"218px", simul_id: "04", length: 2  },
{left:"106px", top:"173px", simul_id: "05", length: 3  },
{left:"37px", top:"80px", simul_id: "06", length: 1  },
{left:"46px", top:"58px", simul_id: "07", length: 1  },
{left:"56px", top:"37px", simul_id: "08", length: 3  },
{left:"232px", top:"41px", simul_id: "09", length: 6  },
{left:"51px", top:"81px", simul_id: "10", length: 6  },
{left:"285px", top:"81px", simul_id: "11", length: 6  },
{left:"175px", top:"110px", simul_id: "12", length: 5  },
{left:"324px", top:"127px", simul_id: "13", length: 5  },
{left:"390px", top:"215px", simul_id: "14", length: 5  },
{left:"116px", top:"44px", simul_id: "15", length: 4  },
{left:"164px", top:"109px", simul_id: "16", length: 4  },
{left:"169px", top:"44px", simul_id: "17", length: 4  },
{left:"226px", top:"46px", simul_id: "18", length: 4  },
{left:"196px", top:"218px", simul_id: "19", length: 3  },
{left:"132px", top:"227px", simul_id: "20", length: 3  },
{left:"132px", top:"252px", simul_id: "21", length: 3  },
{left:"130px", top:"109px", simul_id: "22", length: 3  },
{left:"429px", top:"45px", simul_id: "23", length: 3  },
{left:"312px", top:"217px", simul_id: "24", length: 3  },
{left:"287px", top:"70px", simul_id: "25", length: 3  },
{left:"397px", top:"214px", simul_id: "26", length: 2  },
{left:"387px", top:"179px", simul_id: "27", length: 2  },
{left:"321px", top:"178px", simul_id: "28", length: 2  },
{left:"309px", top:"180px", simul_id: "29", length: 2  },
{left:"284px", top:"222px", simul_id: "30", length: 2  },
{left:"302px", top:"268px", simul_id: "31", length: 2  },
{left:"407px", top:"136px", simul_id: "32", length: 2  },
{left:"410px", top:"128px", simul_id: "33", length: 2  },
{left:"420px", top:"146px", simul_id: "34", length: 2  },
{left:"442px", top:"39px", simul_id: "35", length: 2  },
{left:"448px", top:"68px", simul_id: "36", length: 2  },
{left:"444px", top:"110px", simul_id: "37", length: 2  },
{left:"407px", top:"100px", simul_id: "38", length: 2  },
{left:"353px", top:"69px", simul_id: "39", length: 2  },
{left:"315px", top:"135px", simul_id: "40", length: 2  },
{left:"281px", top:"168px", simul_id: "41", length: 2  },
{left:"263px", top:"106px", simul_id: "42", length: 2  },
{left:"264px", top:"176px", simul_id: "43", length: 2  },
{left:"274px", top:"215px", simul_id: "44", length: 2  },
{left:"267px", top:"222px", simul_id: "45", length: 2  },
{left:"188px", top:"189px", simul_id: "46", length: 2  },
{left:"186px", top:"231px", simul_id: "47", length: 2  },
{left:"397px", top:"89px", simul_id: "48", length: 2  },
{left:"264px", top:"154px", simul_id: "49", length: 1  },
{left:"369px", top:"196px", simul_id: "50", length: 1  },
{left:"275px", top:"262px", simul_id: "51", length: 1  },
{left:"74px", top:"242px", simul_id: "52", length: 3  },
{left:"313px", top:"194px", simul_id: "53", length: 3  },
{left:"366px", top:"170px", simul_id: "54", length: 3  },
{left:"200px", top:"255px", simul_id: "55", length: 4  },
{left:"387px", top:"38px", simul_id: "56", length: 3  },
{left:"343px", top:"114px", simul_id: "57", length: 3  },
{left:"284px", top:"104px", simul_id: "58", length: 3  },
{left:"425px", top:"183px", simul_id: "59", length: 2  },
{left:"31px", top:"203px", simul_id: "60", length: 3  },
{left:"75px", top:"251px", simul_id: "61", length: 6  },
{left:"188px", top:"273px", simul_id: "62", length: 6  },
{left:"122px", top:"25px", simul_id: "63", length: 6  },
{left:"45px", top:"100px", simul_id: "64", length: 6  },
{left:"201px", top:"169px", simul_id: "65", length: 4  },
{left:"196px", top:"146px", simul_id: "66", length: 4  },
{left:"341px", top:"208px", simul_id: "67", length: 4  },
{left:"432px", top:"214px", simul_id: "68", length: 4  },
{left:"349px", top:"257px", simul_id: "69", length: 6  },
{left:"129px", top:"184px", simul_id: "70", length: 5  },
{left:"193px", top:"217px", simul_id: "71", length: 5  },
{left:"355px", top:"134px", simul_id: "72", length: 4  },
{left:"271px", top:"126px", simul_id: "73", length: 4  },
{left:"346px", top:"33px", simul_id: "74", length: 5  },
{left:"193px", top:"189px", simul_id: "75", length: 4  },
{left:"21px", top:"106px", simul_id: "76", length: 5  },
{left:"57px", top:"48px", simul_id: "77", length: 4  },
{left:"336px", top:"82px", simul_id: "78", length: 4  }
]


h = a.index_by { |e| e[:simul_id] }

data = JSON.load_file 'gameDataFromBGA.json'
routes_by_length = data['routes'].values.group_by {|v| v['number'] }


def px_to_bga_x(input)
  (input.to_i - 21) * 3.8 + 69
end

def px_to_bga_y(input)
  (input.to_i - 25) * 3.8 + 90
end

def find_closest(x, y, length, routes_by_length)
  scaled_value_x = px_to_bga_x(x)
  scaled_value_y = px_to_bga_y(y)
  min = routes_by_length[length].min_by do |route|
    entry = route['spaces'].first
    (entry['x'] - scaled_value_x)**2 + (entry['y'] - scaled_value_y)**2
  end
  min['id']
end

# find_closest( record[:left], record[:top], record[:length], routes_by_length )


# x:
# bga
# 0 - 1632
# 0 - 427  (  - 21 px )

# scale:  3,82201405


# y:
# bga
# 0 - 935
# 0 - 248   (  -25 px )

# scale:  3,77016129




# Duplicated:
# {81=>[{:left=>"132px", :top=>"227px", :simul_id=>"20", :length=>3, :bga_id=>81}, {:left=>"132px", :top=>"252px", :simul_id=>"21", :length=>3, :bga_id=>81}], 75=>[{:left=>"321px", :top=>"178px", :simul_id=>"28", :length=>2, :bga_id=>75}, {:left=>"309px", :top=>"180px", :simul_id=>"29", :length=>2, :bga_id=>75}], 27=>[{:left=>"284px", :top=>"222px", :simul_id=>"30", :length=>2, :bga_id=>27}, {:left=>"274px", :top=>"215px", :simul_id=>"44", :length=>2, :bga_id=>27}, {:left=>"267px", :top=>"222px", :simul_id=>"45", :length=>2, :bga_id=>27}]}
{
    81 => [
        [0] {
                :left => "132px",
                 :top => "227px",
            :simul_id => "20",                                    # correct ph - Santa Fe
              :length => 3,
              :bga_id => 81
        },
        [1] {
                :left => "132px",
                 :top => "252px",
            :simul_id => "21", # phoenix  23  - el PAso 9
              :length => 3,
              :bga_id => 81 # should be 47
        }
    ],
    75 => [
        [0] {
                :left => "321px",
                 :top => "178px",
            :simul_id => "28",                                                 # Nashville-Saint Louis  correct
              :length => 2,
              :bga_id => 75
        },
        [1] {
                :left => "309px",
                 :top => "180px",
            :simul_id => "29", # Saint luis 27 - little rock 14
              :length => 2,
              :bga_id => 75 # sh be 65
        }
    ],
    27 => [
        [0] {
                :left => "284px",
                 :top => "222px",
            :simul_id => "30",                                              # <<<<<<<<<<<<<<<<<<<<<<< correct
              :length => 2,
              :bga_id => 27
        },
        [1] {
                :left => "274px",
                 :top => "215px",
            :simul_id => "44",  # oklahoma 21 -little rock 14
              :length => 2,
              :bga_id => 27 # s b 64
        },
        [2] {
                :left => "267px",
                 :top => "222px",
            :simul_id => "45", # oklahome 21 - dallas 6
              :length => 2,
              :bga_id => 27 # should be 28
        }
    ]
}

a.each { |record| record[:bga_id] = find_closest( record[:left], record[:top], record[:length], routes_by_length )  }

[{:left=>"174px", :top=>"101px", :simul_id=>"01", :length=>6, :bga_id=>38}, {:left=>"137px", :top=>"161px", :simul_id=>"02", :length=>3, :bga_id=>37}, {:left=>"40px", :top=>"163px", :simul_id=>"03", :length=>5, :bga_id=>93}, {:left=>"71px", :top=>"218px", :simul_id=>"04", :length=>2, :bga_id=>60}, {:left=>"106px", :top=>"173px", :simul_id=>"05", :length=>3, :bga_id=>61}, {:left=>"37px", :top=>"80px", :simul_id=>"06", :length=>1, :bga_id=>90}, {:left=>"46px", :top=>"58px", :simul_id=>"07", :length=>1, :bga_id=>98}, {:left=>"56px", :top=>"37px", :simul_id=>"08", :length=>3, :bga_id=>13}, {:left=>"232px", :top=>"41px", :simul_id=>"09", :length=>6, :bga_id=>96}, {:left=>"51px", :top=>"81px", :simul_id=>"10", :length=>6, :bga_id=>51}, {:left=>"285px", :top=>"81px", :simul_id=>"11", :length=>6, :bga_id=>42}, {:left=>"175px", :top=>"110px", :simul_id=>"12", :length=>5, :bga_id=>49}, {:left=>"324px", :top=>"127px", :simul_id=>"13", :length=>5, :bga_id=>83}, {:left=>"390px", :top=>"215px", :simul_id=>"14", :length=>5, :bga_id=>2}, {:left=>"116px", :top=>"44px", :simul_id=>"15", :length=>4, :bga_id=>100}, {:left=>"164px", :top=>"109px", :simul_id=>"16", :length=>4, :bga_id=>30}, {:left=>"169px", :top=>"44px", :simul_id=>"17", :length=>4, :bga_id=>52}, {:left=>"226px", :top=>"46px", :simul_id=>"18", :length=>4, :bga_id=>43}, {:left=>"196px", :top=>"218px", :simul_id=>"19", :length=>3, :bga_id=>80}, {:left=>"132px", :top=>"227px", :simul_id=>"20", :length=>3, :bga_id=>81}, {:left=>"132px", :top=>"252px", :simul_id=>"21", :length=>3, :bga_id=>81}, {:left=>"130px", :top=>"109px", :simul_id=>"22", :length=>3, :bga_id=>50}, {:left=>"429px", :top=>"45px", :simul_id=>"23", :length=>3, :bga_id=>70}, {:left=>"312px", :top=>"217px", :simul_id=>"24", :length=>3, :bga_id=>63}, {:left=>"287px", :top=>"70px", :simul_id=>"25", :length=>3, :bga_id=>41}, {:left=>"397px", :top=>"214px", :simul_id=>"26", :length=>2, :bga_id=>1}, {:left=>"387px", :top=>"179px", :simul_id=>"27", :length=>2, :bga_id=>7}, {:left=>"321px", :top=>"178px", :simul_id=>"28", :length=>2, :bga_id=>75}, {:left=>"309px", :top=>"180px", :simul_id=>"29", :length=>2, :bga_id=>75}, {:left=>"284px", :top=>"222px", :simul_id=>"30", :length=>2, :bga_id=>27}, {:left=>"302px", :top=>"268px", :simul_id=>"31", :length=>2, :bga_id=>53}, {:left=>"407px", :top=>"136px", :simul_id=>"32", :length=>2, :bga_id=>91}, {:left=>"410px", :top=>"128px", :simul_id=>"33", :length=>2, :bga_id=>85}, {:left=>"420px", :top=>"146px", :simul_id=>"34", :length=>2, :bga_id=>92}, {:left=>"442px", :top=>"39px", :simul_id=>"35", :length=>2, :bga_id=>8}, {:left=>"448px", :top=>"68px", :simul_id=>"36", :length=>2, :bga_id=>11}, {:left=>"444px", :top=>"110px", :simul_id=>"37", :length=>2, :bga_id=>79}, {:left=>"407px", :top=>"100px", :simul_id=>"38", :length=>2, :bga_id=>77}, {:left=>"353px", :top=>"69px", :simul_id=>"39", :length=>2, :bga_id=>95}, {:left=>"315px", :top=>"135px", :simul_id=>"40", :length=>2, :bga_id=>22}, {:left=>"281px", :top=>"168px", :simul_id=>"41", :length=>2, :bga_id=>59}, {:left=>"263px", :top=>"106px", :simul_id=>"42", :length=>2, :bga_id=>40}, {:left=>"264px", :top=>"176px", :simul_id=>"43", :length=>2, :bga_id=>55}, {:left=>"274px", :top=>"215px", :simul_id=>"44", :length=>2, :bga_id=>27}, {:left=>"267px", :top=>"222px", :simul_id=>"45", :length=>2, :bga_id=>27}, {:left=>"188px", :top=>"189px", :simul_id=>"46", :length=>2, :bga_id=>99}, {:left=>"186px", :top=>"231px", :simul_id=>"47", :length=>2, :bga_id=>48}, {:left=>"397px", :top=>"89px", :simul_id=>"48", :length=>2, :bga_id=>76}, {:left=>"264px", :top=>"154px", :simul_id=>"49", :length=>1, :bga_id=>57}, {:left=>"369px", :top=>"196px", :simul_id=>"50", :length=>1, :bga_id=>3}, {:left=>"275px", :top=>"262px", :simul_id=>"51", :length=>1, :bga_id=>25}, {:left=>"74px", :top=>"242px", :simul_id=>"52", :length=>3, :bga_id=>66}, {:left=>"313px", :top=>"194px", :simul_id=>"53", :length=>3, :bga_id=>62}, {:left=>"366px", :top=>"170px", :simul_id=>"54", :length=>3, :bga_id=>74}, {:left=>"200px", :top=>"255px", :simul_id=>"55", :length=>4, :bga_id=>24}, {:left=>"387px", :top=>"38px", :simul_id=>"56", :length=>3, :bga_id=>72}, {:left=>"343px", :top=>"114px", :simul_id=>"57", :length=>3, :bga_id=>20}, {:left=>"284px", :top=>"104px", :simul_id=>"58", :length=>3, :bga_id=>17}, {:left=>"425px", :top=>"183px", :simul_id=>"59", :length=>2, :bga_id=>16}, {:left=>"31px", :top=>"203px", :simul_id=>"60", :length=>3, :bga_id=>67}, {:left=>"75px", :top=>"251px", :simul_id=>"61", :length=>6, :bga_id=>45}, {:left=>"188px", :top=>"273px", :simul_id=>"62", :length=>6, :bga_id=>44}, {:left=>"122px", :top=>"25px", :simul_id=>"63", :length=>6, :bga_id=>14}, {:left=>"45px", :top=>"100px", :simul_id=>"64", :length=>6, :bga_id=>86}, {:left=>"201px", :top=>"169px", :simul_id=>"65", :length=>4, :bga_id=>32}, {:left=>"196px", :top=>"146px", :simul_id=>"66", :length=>4, :bga_id=>34}, {:left=>"341px", :top=>"208px", :simul_id=>"67", :length=>4, :bga_id=>4}, {:left=>"432px", :top=>"214px", :simul_id=>"68", :length=>4, :bga_id=>15}, {:left=>"349px", :top=>"257px", :simul_id=>"69", :length=>6, :bga_id=>69}, {:left=>"129px", :top=>"184px", :simul_id=>"70", :length=>5, :bga_id=>35}, {:left=>"193px", :top=>"217px", :simul_id=>"71", :length=>5, :bga_id=>46}, {:left=>"355px", :top=>"134px", :simul_id=>"72", :length=>4, :bga_id=>73}, {:left=>"271px", :top=>"126px", :simul_id=>"73", :length=>4, :bga_id=>18}, {:left=>"346px", :top=>"33px", :simul_id=>"74", :length=>5, :bga_id=>71}, {:left=>"193px", :top=>"189px", :simul_id=>"75", :length=>4, :bga_id=>33}, {:left=>"21px", :top=>"106px", :simul_id=>"76", :length=>5, :bga_id=>87}, {:left=>"57px", :top=>"48px", :simul_id=>"77", :length=>4, :bga_id=>12}, {:left=>"336px", :top=>"82px", :simul_id=>"78", :length=>4, :bga_id=>23}]

{
  simul_id: "01",
  length: 2,
  bga_id: 21,
  colors: 45,
  cities: 'Atlanta,Houston'
}

def find_city_by_bga_id(id, data)
  data['cities'][id.to_s].fetch('name')
end

def find_color(bga_link, data)
  first_color = bga_link['color'].to_s
  second_color = data['routes'].values.detect do |e|
    e.fetch('from') == bga_link['from'] && e['to'] == bga_link['to'] &&  e['id'] != bga_link['id']
  end&.fetch('color').to_s
  [first_color,second_color].uniq.compact.join('')
end

a.each do |record|
  bga_link = data['routes'][record[:bga_id].to_s]
  record[:colors] = find_color(bga_link, data)
  record[:cities] = "#{find_city_by_bga_id(bga_link['from'], data)}-#{find_city_by_bga_id(bga_link['to'], data)}"
end

# I got 2 errors, not fixed belowm but not needed most probably:
result = [{:left=>"174px", :top=>"101px", :simul_id=>"01", :length=>6, :bga_id=>38, :colors=>"5", :cities=>"Duluth-Helena"}, {:left=>"137px", :top=>"161px", :simul_id=>"02", :length=>3, :bga_id=>37, :colors=>"47", :cities=>"Denver-Salt Lake City"}, {:left=>"40px", :top=>"163px", :simul_id=>"03", :length=>5, :bga_id=>93, :colors=>"52", :cities=>"Salt Lake City-San Francisco"}, {:left=>"71px", :top=>"218px", :simul_id=>"04", :length=>2, :bga_id=>60, :colors=>"0", :cities=>"Las Vegas-Los Angeles"}, {:left=>"106px", :top=>"173px", :simul_id=>"05", :length=>3, :bga_id=>61, :colors=>"5", :cities=>"Las Vegas-Salt Lake City"}, {:left=>"37px", :top=>"80px", :simul_id=>"06", :length=>1, :bga_id=>90, :colors=>"0", :cities=>"Portland-Seattle"}, {:left=>"46px", :top=>"58px", :simul_id=>"07", :length=>1, :bga_id=>98, :colors=>"0", :cities=>"Seattle-Vancouver"}, {:left=>"56px", :top=>"37px", :simul_id=>"08", :length=>3, :bga_id=>13, :colors=>"0", :cities=>"Calgary-Vancouver"}, {:left=>"232px", :top=>"41px", :simul_id=>"09", :length=>6, :bga_id=>96, :colors=>"0", :cities=>"Sault St. Marie-Winnipeg"}, {:left=>"51px", :top=>"81px", :simul_id=>"10", :length=>6, :bga_id=>51, :colors=>"4", :cities=>"Helena-Seattle"}, {:left=>"285px", :top=>"81px", :simul_id=>"11", :length=>6, :bga_id=>42, :colors=>"1", :cities=>"Duluth-Toronto"}, {:left=>"175px", :top=>"110px", :simul_id=>"12", :length=>5, :bga_id=>49, :colors=>"7", :cities=>"Helena-Omaha"}, {:left=>"324px", :top=>"127px", :simul_id=>"13", :length=>5, :bga_id=>83, :colors=>"8", :cities=>"Pittsburgh-Saint Louis"}, {:left=>"390px", :top=>"215px", :simul_id=>"14", :length=>5, :bga_id=>2, :colors=>"3", :cities=>"Atlanta-Miami"}, {:left=>"116px", :top=>"44px", :simul_id=>"15", :length=>4, :bga_id=>100, :colors=>"0", :cities=>"Calgary-Helena"}, {:left=>"164px", :top=>"109px", :simul_id=>"16", :length=>4, :bga_id=>30, :colors=>"8", :cities=>"Denver-Helena"}, {:left=>"169px", :top=>"44px", :simul_id=>"17", :length=>4, :bga_id=>52, :colors=>"3", :cities=>"Helena-Winnipeg"}, {:left=>"226px", :top=>"46px", :simul_id=>"18", :length=>4, :bga_id=>43, :colors=>"6", :cities=>"Duluth-Winnipeg"}, {:left=>"196px", :top=>"218px", :simul_id=>"19", :length=>3, :bga_id=>80, :colors=>"3", :cities=>"Oklahoma City-Santa Fe"}, {:left=>"132px", :top=>"227px", :simul_id=>"20", :length=>3, :bga_id=>81, :colors=>"0", :cities=>"Phoenix-Santa Fe"}, {:left=>"132px", :top=>"252px", :simul_id=>"21", :length=>3, :bga_id=>47, :colors=>"0", :cities=>"El Paso-Phoenix"}, {:left=>"130px", :top=>"109px", :simul_id=>"22", :length=>3, :bga_id=>50, :colors=>"1", :cities=>"Helena-Salt Lake City"}, {:left=>"429px", :top=>"45px", :simul_id=>"23", :length=>3, :bga_id=>70, :colors=>"3", :cities=>"Montréal-New York"}, {:left=>"312px", :top=>"217px", :simul_id=>"24", :length=>3, :bga_id=>63, :colors=>"8", :cities=>"Little Rock-New Orleans"}, {:left=>"287px", :top=>"70px", :simul_id=>"25", :length=>3, :bga_id=>41, :colors=>"0", :cities=>"Duluth-Sault St. Marie"}, {:left=>"397px", :top=>"214px", :simul_id=>"26", :length=>2, :bga_id=>1, :colors=>"0", :cities=>"Atlanta-Charleston"}, {:left=>"387px", :top=>"179px", :simul_id=>"27", :length=>2, :bga_id=>7, :colors=>"0", :cities=>"Atlanta-Raleigh"}, {:left=>"321px", :top=>"178px", :simul_id=>"28", :length=>2, :bga_id=>75, :colors=>"0", :cities=>"Nashville-Saint Louis"}, {:left=>"309px", :top=>"180px", :simul_id=>"29", :length=>2, :bga_id=>65, :colors=>"0", :cities=>"Little Rock-Saint Louis"}, {:left=>"284px", :top=>"222px", :simul_id=>"30", :length=>2, :bga_id=>27, :colors=>"0", :cities=>"Dallas-Little Rock"}, {:left=>"302px", :top=>"268px", :simul_id=>"31", :length=>2, :bga_id=>53, :colors=>"0", :cities=>"Houston-New Orleans"},
{:left=>"407px", :top=>"136px", :simul_id=>"32", :length=>2, :bga_id=>91, :colors=>"0", :cities=>"Raleigh-Washington"}, # wrong, should be Pittsburgh-Washington  bga_id: ?
{:left=>"410px", :top=>"128px", :simul_id=>"33", :length=>2, :bga_id=>85, :colors=>"0", :cities=>"Pittsburgh-Washington"}, {:left=>"420px", :top=>"146px", :simul_id=>"34", :length=>2, :bga_id=>92, :colors=>"0", :cities=>"Raleigh-Washington"}, {:left=>"442px", :top=>"39px", :simul_id=>"35", :length=>2, :bga_id=>8, :colors=>"0", :cities=>"Boston-Montréal"}, {:left=>"448px", :top=>"68px", :simul_id=>"36", :length=>2, :bga_id=>11, :colors=>"74", :cities=>"Boston-New York"}, {:left=>"444px", :top=>"110px", :simul_id=>"37", :length=>2, :bga_id=>79, :colors=>"65", :cities=>"New York-Washington"}, {:left=>"407px", :top=>"100px", :simul_id=>"38", :length=>2, :bga_id=>77, :colors=>"82", :cities=>"New York-Pittsburgh"}, {:left=>"353px", :top=>"69px", :simul_id=>"39", :length=>2, :bga_id=>95, :colors=>"0", :cities=>"Sault St. Marie-Toronto"}, {:left=>"315px", :top=>"135px", :simul_id=>"40", :length=>2, :bga_id=>22, :colors=>"28", :cities=>"Chicago-Saint Louis"}, {:left=>"281px", :top=>"168px", :simul_id=>"41", :length=>2, :bga_id=>59, :colors=>"13", :cities=>"Kansas City-Saint Louis"}, {:left=>"263px", :top=>"106px", :simul_id=>"42", :length=>2, :bga_id=>40, :colors=>"0", :cities=>"Duluth-Omaha"}, {:left=>"264px", :top=>"176px", :simul_id=>"43", :length=>2, :bga_id=>55, :colors=>"0", :cities=>"Kansas City-Oklahoma City"}, {:left=>"274px", :top=>"215px", :simul_id=>"44", :length=>2, :bga_id=>64, :colors=>"0", :cities=>"Little Rock-Oklahoma City"}, {:left=>"267px", :top=>"222px", :simul_id=>"45", :length=>2, :bga_id=>28, :colors=>"0", :cities=>"Dallas-Oklahoma City"}, {:left=>"188px", :top=>"189px", :simul_id=>"46", :length=>2, :bga_id=>99, :colors=>"0", :cities=>"Denver-Santa Fe"}, {:left=>"186px", :top=>"231px", :simul_id=>"47", :length=>2, :bga_id=>48, :colors=>"0", :cities=>"El Paso-Santa Fe"},
{:left=>"397px", :top=>"89px", :simul_id=>"48", :length=>2, :bga_id=>76, :colors=>"28", :cities=>"New York-Pittsburgh"}, # wrong, should be Toronto-Pittsburgh with colors: "0" bga_id: ?
{:left=>"264px", :top=>"154px", :simul_id=>"49", :length=>1, :bga_id=>57, :colors=>"0", :cities=>"Kansas City-Omaha"}, {:left=>"369px", :top=>"196px", :simul_id=>"50", :length=>1, :bga_id=>3, :colors=>"0", :cities=>"Atlanta-Nashville"}, {:left=>"275px", :top=>"262px", :simul_id=>"51", :length=>1, :bga_id=>25, :colors=>"0", :cities=>"Dallas-Houston"}, {:left=>"74px", :top=>"242px", :simul_id=>"52", :length=>3, :bga_id=>66, :colors=>"0", :cities=>"Los Angeles-Phoenix"}, {:left=>"313px", :top=>"194px", :simul_id=>"53", :length=>3, :bga_id=>62, :colors=>"2", :cities=>"Little Rock-Nashville"}, {:left=>"366px", :top=>"170px", :simul_id=>"54", :length=>3, :bga_id=>74, :colors=>"6", :cities=>"Nashville-Raleigh"}, {:left=>"200px", :top=>"255px", :simul_id=>"55", :length=>4, :bga_id=>24, :colors=>"7", :cities=>"Dallas-El Paso"}, {:left=>"387px", :top=>"38px", :simul_id=>"56", :length=>3, :bga_id=>72, :colors=>"0", :cities=>"Montréal-Toronto"}, {:left=>"343px", :top=>"114px", :simul_id=>"57", :length=>3, :bga_id=>20, :colors=>"65", :cities=>"Chicago-Pittsburgh"}, {:left=>"284px", :top=>"104px", :simul_id=>"58", :length=>3, :bga_id=>17, :colors=>"7", :cities=>"Chicago-Duluth"}, {:left=>"425px", :top=>"183px", :simul_id=>"59", :length=>2, :bga_id=>16, :colors=>"0", :cities=>"Charleston-Raleigh"}, {:left=>"31px", :top=>"203px", :simul_id=>"60", :length=>3, :bga_id=>67, :colors=>"41", :cities=>"Los Angeles-San Francisco"}, {:left=>"75px", :top=>"251px", :simul_id=>"61", :length=>6, :bga_id=>45, :colors=>"6", :cities=>"El Paso-Los Angeles"}, {:left=>"188px", :top=>"273px", :simul_id=>"62", :length=>6, :bga_id=>44, :colors=>"8", :cities=>"El Paso-Houston"}, {:left=>"122px", :top=>"25px", :simul_id=>"63", :length=>6, :bga_id=>14, :colors=>"2", :cities=>"Calgary-Winnipeg"}, {:left=>"45px", :top=>"100px", :simul_id=>"64", :length=>6, :bga_id=>86, :colors=>"3", :cities=>"Portland-Salt Lake City"}, {:left=>"201px", :top=>"169px", :simul_id=>"65", :length=>4, :bga_id=>32, :colors=>"56", :cities=>"Denver-Kansas City"}, {:left=>"196px", :top=>"146px", :simul_id=>"66", :length=>4, :bga_id=>34, :colors=>"1", :cities=>"Denver-Omaha"}, {:left=>"341px", :top=>"208px", :simul_id=>"67", :length=>4, :bga_id=>4, :colors=>"45", :cities=>"Atlanta-New Orleans"}, {:left=>"432px", :top=>"214px", :simul_id=>"68", :length=>4, :bga_id=>15, :colors=>"1", :cities=>"Charleston-Miami"}, {:left=>"349px", :top=>"257px", :simul_id=>"69", :length=>6, :bga_id=>69, :colors=>"7", :cities=>"Miami-New Orleans"}, {:left=>"129px", :top=>"184px", :simul_id=>"70", :length=>5, :bga_id=>35, :colors=>"2", :cities=>"Denver-Phoenix"}, {:left=>"193px", :top=>"217px", :simul_id=>"71", :length=>5, :bga_id=>46, :colors=>"4", :cities=>"El Paso-Oklahoma City"}, {:left=>"355px", :top=>"134px", :simul_id=>"72", :length=>4, :bga_id=>73, :colors=>"4", :cities=>"Nashville-Pittsburgh"}, {:left=>"271px", :top=>"126px", :simul_id=>"73", :length=>4, :bga_id=>18, :colors=>"3", :cities=>"Chicago-Omaha"}, {:left=>"346px", :top=>"33px", :simul_id=>"74", :length=>5, :bga_id=>71, :colors=>"6", :cities=>"Montréal-Sault St. Marie"}, {:left=>"193px", :top=>"189px", :simul_id=>"75", :length=>4, :bga_id=>33, :colors=>"7", :cities=>"Denver-Oklahoma City"}, {:left=>"21px", :top=>"106px", :simul_id=>"76", :length=>5, :bga_id=>87, :colors=>"81", :cities=>"Portland-San Francisco"}, {:left=>"57px", :top=>"48px", :simul_id=>"77", :length=>4, :bga_id=>12, :colors=>"0", :cities=>"Calgary-Seattle"}, {:left=>"336px", :top=>"82px", :simul_id=>"78", :length=>4, :bga_id=>23, :colors=>"2", :cities=>"Chicago-Toronto"}]


res = [{:simul_id=>"01", :colors=>"5", :cities=>"Duluth-Helena", :length=>6}, {:simul_id=>"02", :colors=>"47", :cities=>"Denver-Salt Lake City", :length=>3}, {:simul_id=>"03", :colors=>"52", :cities=>"Salt Lake City-San Francisco", :length=>5}, {:simul_id=>"04", :colors=>"0", :cities=>"Las Vegas-Los Angeles", :length=>2}, {:simul_id=>"05", :colors=>"5", :cities=>"Las Vegas-Salt Lake City", :length=>3}, {:simul_id=>"06", :colors=>"0", :cities=>"Portland-Seattle", :length=>1}, {:simul_id=>"07", :colors=>"0", :cities=>"Seattle-Vancouver", :length=>1}, {:simul_id=>"08", :colors=>"0", :cities=>"Calgary-Vancouver", :length=>3}, {:simul_id=>"09", :colors=>"0", :cities=>"Sault St. Marie-Winnipeg", :length=>6}, {:simul_id=>"10", :colors=>"4", :cities=>"Helena-Seattle", :length=>6}, {:simul_id=>"11", :colors=>"1", :cities=>"Duluth-Toronto", :length=>6}, {:simul_id=>"12", :colors=>"7", :cities=>"Helena-Omaha", :length=>5}, {:simul_id=>"13", :colors=>"8", :cities=>"Pittsburgh-Saint Louis", :length=>5}, {:simul_id=>"14", :colors=>"3", :cities=>"Atlanta-Miami", :length=>5}, {:simul_id=>"15", :colors=>"0", :cities=>"Calgary-Helena", :length=>4}, {:simul_id=>"16", :colors=>"8", :cities=>"Denver-Helena", :length=>4}, {:simul_id=>"17", :colors=>"3", :cities=>"Helena-Winnipeg", :length=>4}, {:simul_id=>"18", :colors=>"6", :cities=>"Duluth-Winnipeg", :length=>4}, {:simul_id=>"19", :colors=>"3", :cities=>"Oklahoma City-Santa Fe", :length=>3}, {:simul_id=>"20", :colors=>"0", :cities=>"Phoenix-Santa Fe", :length=>3}, {:simul_id=>"21", :colors=>"0", :cities=>"El Paso-Phoenix", :length=>3}, {:simul_id=>"22", :colors=>"1", :cities=>"Helena-Salt Lake City", :length=>3}, {:simul_id=>"23", :colors=>"3", :cities=>"Montréal-New York", :length=>3}, {:simul_id=>"24", :colors=>"8", :cities=>"Little Rock-New Orleans", :length=>3}, {:simul_id=>"25", :colors=>"0", :cities=>"Duluth-Sault St. Marie", :length=>3}, {:simul_id=>"26", :colors=>"0", :cities=>"Atlanta-Charleston", :length=>2}, {:simul_id=>"27", :colors=>"0", :cities=>"Atlanta-Raleigh", :length=>2}, {:simul_id=>"28", :colors=>"0", :cities=>"Nashville-Saint Louis", :length=>2}, {:simul_id=>"29", :colors=>"0", :cities=>"Little Rock-Saint Louis", :length=>2}, {:simul_id=>"30", :colors=>"0", :cities=>"Dallas-Little Rock", :length=>2}, {:simul_id=>"31", :colors=>"0", :cities=>"Houston-New Orleans", :length=>2}, {:simul_id=>"32", :colors=>"0", :cities=>"Raleigh-Washington", :length=>2}, {:simul_id=>"33", :colors=>"0", :cities=>"Pittsburgh-Washington", :length=>2}, {:simul_id=>"34", :colors=>"0", :cities=>"Raleigh-Washington", :length=>2}, {:simul_id=>"35", :colors=>"0", :cities=>"Boston-Montréal", :length=>2}, {:simul_id=>"36", :colors=>"74", :cities=>"Boston-New York", :length=>2}, {:simul_id=>"37", :colors=>"65", :cities=>"New York-Washington", :length=>2}, {:simul_id=>"38", :colors=>"82", :cities=>"New York-Pittsburgh", :length=>2}, {:simul_id=>"39", :colors=>"0", :cities=>"Sault St. Marie-Toronto", :length=>2}, {:simul_id=>"40", :colors=>"28", :cities=>"Chicago-Saint Louis", :length=>2}, {:simul_id=>"41", :colors=>"13", :cities=>"Kansas City-Saint Louis", :length=>2}, {:simul_id=>"42", :colors=>"0", :cities=>"Duluth-Omaha", :length=>2}, {:simul_id=>"43", :colors=>"0", :cities=>"Kansas City-Oklahoma City", :length=>2}, {:simul_id=>"44", :colors=>"0", :cities=>"Little Rock-Oklahoma City", :length=>2}, {:simul_id=>"45", :colors=>"0", :cities=>"Dallas-Oklahoma City", :length=>2}, {:simul_id=>"46", :colors=>"0", :cities=>"Denver-Santa Fe", :length=>2}, {:simul_id=>"47", :colors=>"0", :cities=>"El Paso-Santa Fe", :length=>2}, {:simul_id=>"48", :colors=>"28", :cities=>"New York-Pittsburgh", :length=>2}, {:simul_id=>"49", :colors=>"0", :cities=>"Kansas City-Omaha", :length=>1}, {:simul_id=>"50", :colors=>"0", :cities=>"Atlanta-Nashville", :length=>1}, {:simul_id=>"51", :colors=>"0", :cities=>"Dallas-Houston", :length=>1}, {:simul_id=>"52", :colors=>"0", :cities=>"Los Angeles-Phoenix", :length=>3}, {:simul_id=>"53", :colors=>"2", :cities=>"Little Rock-Nashville", :length=>3}, {:simul_id=>"54", :colors=>"6", :cities=>"Nashville-Raleigh", :length=>3}, {:simul_id=>"55", :colors=>"7", :cities=>"Dallas-El Paso", :length=>4}, {:simul_id=>"56", :colors=>"0", :cities=>"Montréal-Toronto", :length=>3}, {:simul_id=>"57", :colors=>"65", :cities=>"Chicago-Pittsburgh", :length=>3}, {:simul_id=>"58", :colors=>"7", :cities=>"Chicago-Duluth", :length=>3}, {:simul_id=>"59", :colors=>"0", :cities=>"Charleston-Raleigh", :length=>2}, {:simul_id=>"60", :colors=>"41", :cities=>"Los Angeles-San Francisco", :length=>3}, {:simul_id=>"61", :colors=>"6", :cities=>"El Paso-Los Angeles", :length=>6}, {:simul_id=>"62", :colors=>"8", :cities=>"El Paso-Houston", :length=>6}, {:simul_id=>"63", :colors=>"2", :cities=>"Calgary-Winnipeg", :length=>6}, {:simul_id=>"64", :colors=>"3", :cities=>"Portland-Salt Lake City", :length=>6}, {:simul_id=>"65", :colors=>"56", :cities=>"Denver-Kansas City", :length=>4}, {:simul_id=>"66", :colors=>"1", :cities=>"Denver-Omaha", :length=>4}, {:simul_id=>"67", :colors=>"45", :cities=>"Atlanta-New Orleans", :length=>4}, {:simul_id=>"68", :colors=>"1", :cities=>"Charleston-Miami", :length=>4}, {:simul_id=>"69", :colors=>"7", :cities=>"Miami-New Orleans", :length=>6}, {:simul_id=>"70", :colors=>"2", :cities=>"Denver-Phoenix", :length=>5}, {:simul_id=>"71", :colors=>"4", :cities=>"El Paso-Oklahoma City", :length=>5}, {:simul_id=>"72", :colors=>"4", :cities=>"Nashville-Pittsburgh", :length=>4}, {:simul_id=>"73", :colors=>"3", :cities=>"Chicago-Omaha", :length=>4}, {:simul_id=>"74", :colors=>"6", :cities=>"Montréal-Sault St. Marie", :length=>5}, {:simul_id=>"75", :colors=>"7", :cities=>"Denver-Oklahoma City", :length=>4}, {:simul_id=>"76", :colors=>"81", :cities=>"Portland-San Francisco", :length=>5}, {:simul_id=>"77", :colors=>"0", :cities=>"Calgary-Seattle", :length=>4}, {:simul_id=>"78", :colors=>"2", :cities=>"Chicago-Toronto", :length=>4}]


json = '[{"simul_id":"01","colors":"5","cities":"Duluth-Helena","length":6},{"simul_id":"02","colors":"47","cities":"Denver-Salt Lake City","length":3},{"simul_id":"03","colors":"52","cities":"Salt Lake City-San Francisco","length":5},{"simul_id":"04","colors":"0","cities":"Las Vegas-Los Angeles","length":2},{"simul_id":"05","colors":"5","cities":"Las Vegas-Salt Lake City","length":3},{"simul_id":"06","colors":"0","cities":"Portland-Seattle","length":1},{"simul_id":"07","colors":"0","cities":"Seattle-Vancouver","length":1},{"simul_id":"08","colors":"0","cities":"Calgary-Vancouver","length":3},{"simul_id":"09","colors":"0","cities":"Sault St. Marie-Winnipeg","length":6},{"simul_id":"10","colors":"4","cities":"Helena-Seattle","length":6},{"simul_id":"11","colors":"1","cities":"Duluth-Toronto","length":6},{"simul_id":"12","colors":"7","cities":"Helena-Omaha","length":5},{"simul_id":"13","colors":"8","cities":"Pittsburgh-Saint Louis","length":5},{"simul_id":"14","colors":"3","cities":"Atlanta-Miami","length":5},{"simul_id":"15","colors":"0","cities":"Calgary-Helena","length":4},{"simul_id":"16","colors":"8","cities":"Denver-Helena","length":4},{"simul_id":"17","colors":"3","cities":"Helena-Winnipeg","length":4},{"simul_id":"18","colors":"6","cities":"Duluth-Winnipeg","length":4},{"simul_id":"19","colors":"3","cities":"Oklahoma City-Santa Fe","length":3},{"simul_id":"20","colors":"0","cities":"Phoenix-Santa Fe","length":3},{"simul_id":"21","colors":"0","cities":"El Paso-Phoenix","length":3},{"simul_id":"22","colors":"1","cities":"Helena-Salt Lake City","length":3},{"simul_id":"23","colors":"3","cities":"Montréal-New York","length":3},{"simul_id":"24","colors":"8","cities":"Little Rock-New Orleans","length":3},{"simul_id":"25","colors":"0","cities":"Duluth-Sault St. Marie","length":3},{"simul_id":"26","colors":"0","cities":"Atlanta-Charleston","length":2},{"simul_id":"27","colors":"0","cities":"Atlanta-Raleigh","length":2},{"simul_id":"28","colors":"0","cities":"Nashville-Saint Louis","length":2},{"simul_id":"29","colors":"0","cities":"Little Rock-Saint Louis","length":2},{"simul_id":"30","colors":"0","cities":"Dallas-Little Rock","length":2},{"simul_id":"31","colors":"0","cities":"Houston-New Orleans","length":2},{"simul_id":"32","colors":"0","cities":"Raleigh-Pittsburgh","length":2},{"simul_id":"33","colors":"0","cities":"Pittsburgh-Washington","length":2},{"simul_id":"34","colors":"0","cities":"Raleigh-Washington","length":2},{"simul_id":"35","colors":"0","cities":"Boston-Montréal","length":2},{"simul_id":"36","colors":"74","cities":"Boston-New York","length":2},{"simul_id":"37","colors":"65","cities":"New York-Washington","length":2},{"simul_id":"38","colors":"82","cities":"New York-Pittsburgh","length":2},{"simul_id":"39","colors":"0","cities":"Sault St. Marie-Toronto","length":2},{"simul_id":"40","colors":"28","cities":"Chicago-Saint Louis","length":2},{"simul_id":"41","colors":"13","cities":"Kansas City-Saint Louis","length":2},{"simul_id":"42","colors":"0","cities":"Duluth-Omaha","length":2},{"simul_id":"43","colors":"0","cities":"Kansas City-Oklahoma City","length":2},{"simul_id":"44","colors":"0","cities":"Little Rock-Oklahoma City","length":2},{"simul_id":"45","colors":"0","cities":"Dallas-Oklahoma City","length":2},{"simul_id":"46","colors":"0","cities":"Denver-Santa Fe","length":2},{"simul_id":"47","colors":"0","cities":"El Paso-Santa Fe","length":2},{"simul_id":"48","colors":"28","cities":"New York-Pittsburgh","length":2},{"simul_id":"49","colors":"0","cities":"Kansas City-Omaha","length":1},{"simul_id":"50","colors":"0","cities":"Atlanta-Nashville","length":1},{"simul_id":"51","colors":"0","cities":"Dallas-Houston","length":1},{"simul_id":"52","colors":"0","cities":"Los Angeles-Phoenix","length":3},{"simul_id":"53","colors":"2","cities":"Little Rock-Nashville","length":3},{"simul_id":"54","colors":"6","cities":"Nashville-Raleigh","length":3},{"simul_id":"55","colors":"7","cities":"Dallas-El Paso","length":4},{"simul_id":"56","colors":"0","cities":"Montréal-Toronto","length":3},{"simul_id":"57","colors":"65","cities":"Chicago-Pittsburgh","length":3},{"simul_id":"58","colors":"7","cities":"Chicago-Duluth","length":3},{"simul_id":"59","colors":"0","cities":"Charleston-Raleigh","length":2},{"simul_id":"60","colors":"41","cities":"Los Angeles-San Francisco","length":3},{"simul_id":"61","colors":"6","cities":"El Paso-Los Angeles","length":6},{"simul_id":"62","colors":"8","cities":"El Paso-Houston","length":6},{"simul_id":"63","colors":"2","cities":"Calgary-Winnipeg","length":6},{"simul_id":"64","colors":"3","cities":"Portland-Salt Lake City","length":6},{"simul_id":"65","colors":"56","cities":"Denver-Kansas City","length":4},{"simul_id":"66","colors":"1","cities":"Denver-Omaha","length":4},{"simul_id":"67","colors":"45","cities":"Atlanta-New Orleans","length":4},{"simul_id":"68","colors":"1","cities":"Charleston-Miami","length":4},{"simul_id":"69","colors":"7","cities":"Miami-New Orleans","length":6},{"simul_id":"70","colors":"2","cities":"Denver-Phoenix","length":5},{"simul_id":"71","colors":"4","cities":"El Paso-Oklahoma City","length":5},{"simul_id":"72","colors":"4","cities":"Nashville-Pittsburgh","length":4},{"simul_id":"73","colors":"3","cities":"Chicago-Omaha","length":4},{"simul_id":"74","colors":"6","cities":"Montréal-Sault St. Marie","length":5},{"simul_id":"75","colors":"7","cities":"Denver-Oklahoma City","length":4},{"simul_id":"76","colors":"81","cities":"Portland-San Francisco","length":5},{"simul_id":"77","colors":"0","cities":"Calgary-Seattle","length":4},{"simul_id":"78","colors":"2","cities":"Chicago-Toronto","length":4}]'
